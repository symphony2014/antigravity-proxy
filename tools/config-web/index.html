<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ANTIGRAVITY // CONFIG_LAB</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Background Noise/Decorations -->
  <div class="ascii-decor">
    SYSTEM STATUS: ONLINE
    KERNEL: v4.2.0-rc1
    SECURITY: ENCRYPTED
    CONNECT: SECURE
    
    // ANTIGRAVITY PROJECT
    // COPYRIGHT 2026
  </div>

  <header class="topbar">
    <div class="brand">
      <h1 class="brand-title">ANTIGRAVITY<span style="color:var(--accent)">_PROXY</span></h1>
      <p class="brand-subtitle">> ROUTING_CONFIGURATION_LAB</p>
    </div>
    <div class="topbar-actions">
      <label class="file-button" title="Import JSON Configuration">
        <span>[ IMPORT ]</span>
        <input id="configFile" type="file" accept="application/json" />
      </label>
      <button id="btnLoadExample" class="ghost">[ RESET_DEFAULTS ]</button>
      <button id="btnDownload" class="primary">[ EXPORT_CONFIG ]</button>
    </div>
  </header>

  <main class="layout">
    
    <!-- Global Settings -->
    <div style="display: grid; gap: 24px; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));">
      <section class="card">
        <div class="card-header">
          <h2>// GLOBAL_POLICY</h2>
          <p>SYSTEM_BEHAVIOR_CONTROL</p>
        </div>
        <div class="card-body">
          <div class="form-grid compact">
            <label class="field inline">
              <input id="routingEnabled" type="checkbox" />
              <span>ENABLE_ROUTING_ENGINE</span>
            </label>
            <label class="field inline">
              <input id="useDefaultPrivate" type="checkbox" />
              <span>BYPASS_PRIVATE_NETWORKS</span>
            </label>
            <label class="field">
              <span>PRIORITY_MODE</span>
              <select id="priorityMode">
                <option value="order">SEQUENTIAL (LIST_ORDER)</option>
                <option value="number">NUMERIC (PRIORITY_VAL)</option>
              </select>
            </label>
            <label class="field">
              <span>DEFAULT_ACTION</span>
              <select id="defaultAction">
                <option value="proxy">PROXY (TUNNEL)</option>
                <option value="direct">DIRECT (BYPASS)</option>
              </select>
            </label>
          </div>
          <div id="priorityWarning" class="notice warn"></div>
        </div>
      </section>

      <section class="card">
        <div class="card-header">
          <h2>// UPSTREAM_PROXY</h2>
          <p>EGRESS_POINT_CONFIGURATION</p>
        </div>
        <div class="card-body">
          <div class="form-grid">
            <label class="field">
              <span>PROTOCOL</span>
              <select id="proxyType">
                <option value="socks5">SOCKS5</option>
                <option value="http">HTTP</option>
              </select>
            </label>
            <label class="field">
              <span>HOST</span>
              <input id="proxyHost" type="text" placeholder="127.0.0.1" />
            </label>
            <label class="field">
              <span>PORT</span>
              <input id="proxyPort" type="number" placeholder="7890" />
            </label>
          </div>
        </div>
      </section>
    </div>

    <!-- Rule Editor -->
    <section class="card rule-section">
      <div class="card-header">
        <h2>// RULE_MANAGEMENT</h2>
        <p>TRAFFIC_INTERCEPTION_LOGIC</p>
      </div>
      <div class="rule-layout">
        <!-- Sidebar -->
        <aside class="rule-list-container">
          <div class="rule-toolbar">
            <button id="btnAddRule" class="ghost" title="Add New Rule">[ + ]</button>
            <button id="btnCloneRule" class="ghost" title="Clone Selected">[ CLONE ]</button>
            <button id="btnMoveUp" class="ghost" title="Move Up">[ ↑ ]</button>
            <button id="btnMoveDown" class="ghost" title="Move Down">[ ↓ ]</button>
            <button id="btnDeleteRule" class="danger" title="Delete Rule">[ X ]</button>
          </div>
          <ul id="ruleList">
            <!-- Dynamic Content -->
          </ul>
        </aside>

        <!-- Detail Editor -->
        <div class="rule-editor-container">
          <div id="ruleEditorForm">
            <div class="form-grid">
              <label class="field" style="grid-column: span 2;">
                <span>RULE_ID (NAME)</span>
                <input id="ruleName" type="text" placeholder="rule_identifier" />
              </label>
              <label class="field">
                <span>ACTION</span>
                <select id="ruleAction">
                  <option value="proxy">PROXY</option>
                  <option value="direct">DIRECT</option>
                </select>
              </label>
              <label class="field">
                <span>PRIORITY_VAL</span>
                <input id="rulePriority" type="number" placeholder="0" />
              </label>
              <label class="field inline">
                <input id="ruleEnabled" type="checkbox" />
                <span>ACTIVE</span>
              </label>
            </div>

            <div style="margin-top: 20px; display: grid; gap: 20px; grid-template-columns: 1fr 1fr;">
              <label class="field">
                <span>IPV4_CIDR_BLOCKS</span>
                <textarea id="ruleIpv4" rows="5" placeholder="192.168.1.0/24"></textarea>
              </label>
              <label class="field">
                <span>IPV6_CIDR_BLOCKS</span>
                <textarea id="ruleIpv6" rows="5" placeholder="::1/128"></textarea>
              </label>
            </div>

            <div style="margin-top: 20px; display: grid; gap: 20px; grid-template-columns: 1fr 1fr;">
              <label class="field">
                <span>DOMAIN_PATTERNS</span>
                <textarea id="ruleDomains" rows="5" placeholder="example.com&#10;*.corp.net"></textarea>
              </label>
              <label class="field">
                <span>PORT_RANGES</span>
                <textarea id="rulePorts" rows="5" placeholder="80&#10;443&#10;8000-9000"></textarea>
              </label>
            </div>

            <div style="margin-top: 20px;">
              <label class="field">
                <span>PROTOCOL (TCP_ONLY)</span>
                <input id="ruleProtocols" type="text" placeholder="tcp" />
              </label>
            </div>
            
            <div id="ruleRiskWarning" class="notice warn" style="display: none"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Test Console -->
    <section class="card test-console">
      <div class="card-header">
        <h2>// SIMULATION_CONSOLE</h2>
        <p>LOCAL_ROUTING_PREDICTION_SYSTEM</p>
      </div>
      <div class="card-body">
        <div class="form-grid compact" style="align-items: end;">
          <label class="field" style="flex: 2;">
            <span>TARGET_HOST / IP</span>
            <input id="testHost" type="text" placeholder="target.system.local" />
          </label>
          <label class="field">
            <span>PORT</span>
            <input id="testPort" type="number" placeholder="443" />
          </label>
          <label class="field">
            <span>PROTOCOL</span>
            <select id="testProto">
              <option value="tcp">TCP</option>
            </select>
          </label>
          <button id="btnTest" class="primary" style="height: 42px;">
            <span>[ EXECUTE_TEST ]</span>
          </button>
        </div>
        <div id="testResult" class="test-output">_WAITING_FOR_INPUT...</div>
      </div>
    </section>

  </main>
  
  <div id="toastContainer" class="toast-container"></div>

  <script src="app.js"></script>
</body>
</html>
